---
import { Image } from "astro:assets";
import services from "../collections/services.json";

/**
 * Importa todas las imágenes del directorio
 * Astro las convierte en módulos válidos para <Image />
 */
const icons = import.meta.glob<{
  default: ImageMetadata;
}>("../assets/icons/*.{png,jpg,jpeg,webp,svg}", {
  eager: true,
});
---

<section id="services" class="section-bg">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 offset-lg-1 mt-5">
        <div class="text-center mb-5">
          <h2
            class="display-4 fw-bold text-dark mb-3"
            style="text-shadow: 2px 2px 4px rgba(0,0,0,0.7);"
          >
            Nuestros Servicios
          </h2>
          <div
            class="mx-auto mb-4"
            style="width: 100px; height: 4px; background-color: #0ea5e9;"
          >
          </div>
          <p class="lead text-muted mx-auto" style="max-width: 700px;">
            Experiencias únicas diseñadas para convertir tu viaje en una
            aventura inolvidable
          </p>
        </div>
        <div class="row row-cols-1 row-cols-md-3 g-4">
          {
            services.map((service) => {
              const iconPath = `../assets/icons/${service.icon}`;
              const icon = icons[iconPath]?.default;

              return (
                <div class="col">
                  <div class="card h-100 pt-5 d-flex flex-column shadow-lg">
                    {icon && (
                      <Image
                        src={icon}
                        alt={service.title}
                        width={64}
                        height={64}
                        class="card-img-top w-25 mx-auto"
                      />
                    )}

                    <div class="card-body d-flex flex-column text-center">
                      <h5 class="fs-2 card-title">{service.title}</h5>

                      {/* Descripción ocupa el espacio variable */}
                      <p class="card-text flex-grow-1">{service.description}</p>

                      {/* Precio siempre queda alineado abajo */}
                      <h5 class="fs-2 pricing-card-title mt-3">
                        {service.price}
                      </h5>
                    </div>
                  </div>
                </div>
              );
            })
          }
        </div>
      </div>
    </div>
  </div>

  <div id="we" class="parallax mt-5">
    <div class="container text-center text-white">
      <h2 class="display-4 fw-bold text-white pt-5 mb-3 parax">
        <em>15 Años Conectando con la Naturaleza</em>
      </h2>
      <p class="lead text-white mx-auto parax m-5">
        Desde 2009, Vientos del Sur ha sido el puente entre viajeros apasionados
        y las maravillas inexploradas de la Región de Aysén. Nacimos del amor
        por nuestra tierra y el deseo de compartir su belleza inigualable con el
        mundo.
      </p>
      <p class="lead text-white mx-auto parax m-5">
        Nuestro equipo está conformado por profesionales locales que conocen
        cada rincón de la Patagonia chilena. Combinamos experiencia, seguridad y
        pasión para crear experiencias que van más allá del turismo
        convencional.
      </p>
      <p class="lead text-white mx-auto parax m-5">
        Creemos en el turismo sustentable y responsable, trabajando de la mano
        con comunidades locales para preservar el patrimonio natural y cultural
        de nuestra región para las futuras generaciones.
      </p>
      <div class="hstack gap-5 justify-content-center">
        <div class="d-flex flex-column mb-3">
          <h3 class="display-6 card-title pricing-card-title flex-column parax">
            15+
          </h3>
          <p class="fw-light parax">Años de Experiencia.</p>
        </div>
        <div class="d-flex flex-column mb-3">
          <h3 class="display-6 card-title pricing-card-title flex-column parax">
            10K+
          </h3>
          <p class="fw-light parax">Clientes Satisfechos.</p>
        </div>
        <div class="d-flex flex-column mb-3">
          <h3 class="display-6 card-title pricing-card-title flex-column parax">
            20+
          </h3>
          <p class="fw-light parax">Destinos Únicos.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .parallax {
    /* Ajusta la altura del parallax a tu gusto */
    min-height: 600px;
    /* La imagen de fondo se ajusta a la ventana */
    background-image:
      linear-gradient(
        to top,
        rgba(31, 41, 52, 0.6) 0%,
        rgba(0, 0, 0, 0.8) 100%
      ),
      url(../assets/parallax-01.jpg);
    background-attachment: fixed;
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    transition: background-image 0.5s ease-in-out;
  }

  .section-bg {
    background-color: #eff6ff;
  }

  .parax {
    color: #fff;
    text-shadow:
      1px 1px 1px #000,
      2px 2px 2px #000;
  }

  .firstLetter::first-letter {
    font-size: 3rem; /* Tamaño mayor para la primera letra */
    color: #343a40; /* Color opcional */
    float: left; /* Flotar a la izquierda */
    line-height: 0.2; /* Mantener el interlineado */
    margin-left: 0.5em; /* Espacio entre la primera letra y el resto del texto */
  }
</style>
